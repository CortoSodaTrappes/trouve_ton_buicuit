{% extends 'test.html.twig' %}
{% block body %}
    {% if app.user is not null %}
        <p>Connecté en tant que {{app.user.pseudo}} (<a href="{{path('test_logout')}}">Déconnexion</a>).</p>
    <h2>Messagerie de 
        {{ app.user.pseudo }}</h2>
    {% else %}
        <p>Utilisateur anonyme (<a href="{{path('test_login')}}">connexion</a>).</p>
        <h2>Tous les messages enregistrés</h2>
    {% endif %}
        <table>
        <tr><th>Titre</th><th>id exp.</th><th>Date</td></tr>
        
        {% for msg in messages_recus %}
            <tr>
                <td><a href="{{path('test_showmessage', {id:msg.id}) }}">{{msg.titre}}</a></td>
                <td>&nbsp;</td>
                <td>{{msg.date|date("d/m/Y H:i:s")}}</td>
            </tr>
            {# <td>{{msg.titre}}</td><td>{{msg.id_expediteur.id}}</td><td>{{msg.date|date("d/m/Y H:i:s")}}</td> #}
            {% for attributs in msg %}
                {{dump(attributs)}}
            {% endfor %}
        {% endfor %}
        </table>

        <p><a href="{{path('test_list')}}">Liste des membres</a></p>



        {# {{dump(messages_recus)}}
        <br>
        {{dump(messages_envoyes)}} #}

{% endblock %}